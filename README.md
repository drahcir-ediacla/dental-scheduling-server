# ğŸ¦· Dental Scheduling App â€“ Backend (Node.js + Express + Prisma)

This is the **backend** repository for the Dental Scheduling App. It powers user authentication, dentist and time slot management, and appointment scheduling via a RESTful API.

> The frontend is maintained in a separate repository. Ensure both client and server are running for full functionality.

---

## ğŸ“¦ Tech Stack

* **Node.js + Express** â€“ Backend server framework
* **TypeScript** â€“ For robust, typed development
* **Prisma ORM** â€“ Database access layer
* **MySQL** â€“ Relational database
* **JWT** â€“ Authentication with access and refresh tokens

---

## ğŸ—ƒï¸ Project Structure

```
server/
â”œâ”€â”€ prisma/             # Prisma schema and migrations
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/    # Route handlers
â”‚   â”œâ”€â”€ routes/         # Express route definitions
â”‚   â”œâ”€â”€ middleware/     # Auth and error middleware
â”‚   â”œâ”€â”€ services/       # Business logic
â”‚   â”œâ”€â”€ utils/          # Helper functions (JWT, hashing, etc.)
â”‚   â””â”€â”€ index.ts        # App entry point
â”œâ”€â”€ .env                # Environment variables
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

---

## ğŸš€ Getting Started

### 1. Clone the Repository

```bash
git clone https://github.com/drahcir-ediacla/dental-scheduling-server.git
cd dental-scheduling-server
```

### 2. Install Dependencies

```bash
npm install
```

### 3. Setup Environment Variables

Create a `.env` file:

```env
DATABASE_URL="mysql://username:password@localhost:3306/dental_db"
ACCESS_TOKEN_SECRET="access_jwt_secret"
REFRESH_TOKEN_SECRET="refresh_jwt_secret"
NODE_ENV="production_or_development"
```

### 4. Run Migrations and Generate Client

```bash
npx prisma generate
npx prisma migrate dev --name init
```

### 5. Start the Server

```bash
npm run dev
```

> Server will run at `http://localhost:3000`

---

## ğŸ“– API Endpoints

### Auth

* `POST /api/auth/register`
* `POST /api/auth/login`

### Dentists

* `GET /api/dentists`
* `GET /api/dentists/:id/available-slots`

### Appointments

* `POST /api/appointments`
* `GET /api/users/:userId/appointments`
* `PUT /api/appointments/:appointmentId`
* `DELETE /api/appointments/:appointmentId`

### Utilities

* `POST /api/generate-time-slots` â€“ Manually trigger time slot generation

---

### â° Time Slot Generator

Time slots can be manually generated by sending a POST request to:

POST /api/generate-time-slots

This will generate 30 days of time slots for all dentists with predefined daily slots such as:
09:00 AM, 10:00 AM, 11:00 AM, 01:00 PM, 02:00 PM, 03:00 PM, 04:00 PM

This mechanism exists because there is currently no Admin Panel where doctors can set their availability.
The generator ensures that appointments can still be scheduled in the meantime.

---

## ğŸ§  Database Schema Overview (Prisma)

Includes the following models:

* `User`
* `Dentist`
* `TimeSlot`
* `Appointment`
* `RefreshToken`

> View the full schema in `prisma/schema.prisma`

---

## â— Assumptions

* There is no admin dashboard yet, so dentist availability is handled via the time slot generator.
* All users are patients; role-based access is not yet implemented.
* Time slots are fixed and the same for all dentists.
* Passwords are assumed to be securely hashed (e.g., using bcrypt).
* Refresh tokens are used for session management and are stored per user.
* No email confirmation or 2FA is currently implemented.

---

## ğŸ›  Future Improvements

* Admin panel for managing slots/dentists
* Email or SMS notifications for reminders
* Role-based access
* Appointment status (e.g., confirmed, completed, canceled)
* Implement rate limiting on the API endpoints to prevent abuse.

---

## âœ… Requirements

* Node.js 18+
* MySQL 8+
* Frontend client running ([Dental Scheduler Client](https://github.com/drahcir-ediacla/dental-scheduling-client))

---

## ğŸ“¬ Contact

Feel free to open issues or contribute if you have suggestions or run into problems.

---

Â© 2025 Dental Scheduling App â€“ Backend
